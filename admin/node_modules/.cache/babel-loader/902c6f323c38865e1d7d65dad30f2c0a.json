{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Desktop\\\\BusEase\\\\admin\\\\src\\\\components\\\\ScheduleManagement\\\\ScheduleManagement.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { getSchedules, getSchedule, updateSchedule, deleteSchedule } from '../../api/scheduleApi';\nimport './ScheduleManagement.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ScheduleManagement = () => {\n  _s();\n\n  const [schedules, setSchedules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [editMode, setEditMode] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    origin: '',\n    destination: '',\n    price: '',\n    departureDate: '',\n    departureTime: '',\n    arrivalTime: '',\n    desc: '',\n    totalSeats: ''\n  });\n  useEffect(() => {\n    const fetchSchedules = async () => {\n      try {\n        const {\n          data\n        } = await getSchedules();\n        setSchedules(data);\n      } catch (err) {\n        setError('Failed to fetch schedules');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSchedules();\n  }, []);\n\n  const handleEditClick = async id => {\n    try {\n      const {\n        data\n      } = await getSchedule(id);\n      setSelectedSchedule(data);\n      setFormData({\n        name: data.name,\n        origin: data.origin,\n        destination: data.destination,\n        price: data.price,\n        departureDate: data.departureDate.split('T')[0],\n        departureTime: data.departureTime,\n        arrivalTime: data.arrivalTime,\n        desc: data.desc,\n        totalSeats: data.totalSeats\n      });\n      setEditMode(true);\n    } catch (err) {\n      console.error('Failed to fetch schedule data:', err);\n      setError('Failed to fetch schedule data');\n    }\n  };\n\n  const handleFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({ ...formData,\n      [name]: value\n    });\n  };\n\n  const handleConfirmEdit = async () => {\n    setError(null);\n\n    try {\n      const {\n        data\n      } = await updateSchedule(selectedSchedule._id, formData);\n      setSchedules(schedules.map(schedule => schedule._id === selectedSchedule._id ? data : schedule));\n      setEditMode(false);\n      setSelectedSchedule(null);\n    } catch (err) {\n      console.error('Failed to update schedule:', err);\n      setError('Failed to update schedule');\n    }\n  };\n\n  const handleDelete = async id => {\n    try {\n      await deleteSchedule(id);\n      setSchedules(schedules.filter(schedule => schedule._id !== id));\n    } catch (err) {\n      console.error('Failed to delete schedule:', err);\n      setError('Failed to delete schedule');\n    }\n  };\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading schedules...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"scheduleManagement\",\n    children: editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"editForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Edit Schedule\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Origin:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"origin\",\n        value: formData.origin,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Destination:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"destination\",\n        value: formData.destination,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Price:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"price\",\n        value: formData.price,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Departure Date:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"departureDate\",\n        value: formData.departureDate,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Departure Time:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"departureTime\",\n        value: formData.departureTime,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Arrival Time:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"arrivalTime\",\n        value: formData.arrivalTime,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"desc\",\n        value: formData.desc,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Total Seats:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"totalSeats\",\n        value: formData.totalSeats,\n        onChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleConfirmEdit,\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setEditMode(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"managementTable\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Origin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Destination\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: schedules.map(schedule => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: schedule.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: schedule.origin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: schedule.destination\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: schedule.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleEditClick(schedule._id),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleDelete(schedule._id),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 33\n          }, this)]\n        }, schedule._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ScheduleManagement, \"r2x2x/buLgo2DG2bZ1mGicptR1g=\");\n\n_c = ScheduleManagement;\nexport default ScheduleManagement;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScheduleManagement\");","map":{"version":3,"sources":["C:/Users/user/OneDrive/Desktop/BusEase/admin/src/components/ScheduleManagement/ScheduleManagement.jsx"],"names":["React","useEffect","useState","axios","getSchedules","getSchedule","updateSchedule","deleteSchedule","ScheduleManagement","schedules","setSchedules","loading","setLoading","error","setError","selectedSchedule","setSelectedSchedule","editMode","setEditMode","formData","setFormData","name","origin","destination","price","departureDate","departureTime","arrivalTime","desc","totalSeats","fetchSchedules","data","err","console","handleEditClick","id","split","handleFormChange","e","value","target","handleConfirmEdit","_id","map","schedule","handleDelete","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { getSchedules, getSchedule, updateSchedule, deleteSchedule } from '../../api/scheduleApi';\r\nimport './ScheduleManagement.css';\r\n\r\nconst ScheduleManagement = () => {\r\n    const [schedules, setSchedules] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        origin: '',\r\n        destination: '',\r\n        price: '',\r\n        departureDate: '',\r\n        departureTime: '',\r\n        arrivalTime: '',\r\n        desc: '',\r\n        totalSeats: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        const fetchSchedules = async () => {\r\n            try {\r\n                const { data } = await getSchedules();\r\n                setSchedules(data);\r\n            } catch (err) {\r\n                setError('Failed to fetch schedules');\r\n                console.error(err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchSchedules();\r\n    }, []);\r\n\r\n    const handleEditClick = async (id) => {\r\n        try {\r\n            const { data } = await getSchedule(id);\r\n            setSelectedSchedule(data);\r\n            setFormData({\r\n                name: data.name,\r\n                origin: data.origin,\r\n                destination: data.destination,\r\n                price: data.price,\r\n                departureDate: data.departureDate.split('T')[0],\r\n                departureTime: data.departureTime,\r\n                arrivalTime: data.arrivalTime,\r\n                desc: data.desc,\r\n                totalSeats: data.totalSeats,\r\n            });\r\n            setEditMode(true);\r\n        } catch (err) {\r\n            console.error('Failed to fetch schedule data:', err);\r\n            setError('Failed to fetch schedule data');\r\n        }\r\n    };\r\n\r\n    const handleFormChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData({ ...formData, [name]: value });\r\n    };\r\n\r\n    const handleConfirmEdit = async () => {\r\n        setError(null);\r\n        try {\r\n            const { data } = await updateSchedule(selectedSchedule._id, formData);\r\n            setSchedules(schedules.map(schedule => schedule._id === selectedSchedule._id ? data : schedule));\r\n            setEditMode(false);\r\n            setSelectedSchedule(null);\r\n        } catch (err) {\r\n            console.error('Failed to update schedule:', err);\r\n            setError('Failed to update schedule');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            await deleteSchedule(id);\r\n            setSchedules(schedules.filter(schedule => schedule._id !== id));\r\n        } catch (err) {\r\n            console.error('Failed to delete schedule:', err);\r\n            setError('Failed to delete schedule');\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading schedules...</div>;\r\n    if (error) return <div>{error}</div>;\r\n\r\n    return (\r\n        <div className=\"scheduleManagement\">\r\n            {editMode ? (\r\n                <div className=\"editForm\">\r\n                    <h4>Edit Schedule</h4>\r\n                    <label>Name:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        value={formData.name}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Origin:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"origin\"\r\n                        value={formData.origin}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Destination:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"destination\"\r\n                        value={formData.destination}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Price:</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        name=\"price\"\r\n                        value={formData.price}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Departure Date:</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        name=\"departureDate\"\r\n                        value={formData.departureDate}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Departure Time:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"departureTime\"\r\n                        value={formData.departureTime}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Arrival Time:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"arrivalTime\"\r\n                        value={formData.arrivalTime}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Description:</label>\r\n                    <textarea\r\n                        name=\"desc\"\r\n                        value={formData.desc}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <label>Total Seats:</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        name=\"totalSeats\"\r\n                        value={formData.totalSeats}\r\n                        onChange={handleFormChange}\r\n                    />\r\n                    <button onClick={handleConfirmEdit}>Edit</button>\r\n                    <button onClick={() => setEditMode(false)}>Cancel</button>\r\n                </div>\r\n            ) : (\r\n                <table className=\"managementTable\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Origin</th>\r\n                            <th>Destination</th>\r\n                            <th>Price</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {schedules.map(schedule => (\r\n                            <tr key={schedule._id}>\r\n                                <td>{schedule.name}</td>\r\n                                <td>{schedule.origin}</td>\r\n                                <td>{schedule.destination}</td>\r\n                                <td>{schedule.price}</td>\r\n                                <td>\r\n                                    <button onClick={() => handleEditClick(schedule._id)}>Edit</button>\r\n                                    <button onClick={() => handleDelete(schedule._id)}>Delete</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ScheduleManagement;\r\n"]},"metadata":{},"sourceType":"module"}