{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Desktop\\\\BusEase\\\\admin\\\\src\\\\components\\\\ScheduleDetail\\\\ScheduleDetail.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { getSchedule, updateSchedule } from '../../api/scheduleApi';\nimport DriveFolderUploadOutlinedIcon from '@mui/icons-material/DriveFolderUploadOutlined';\nimport './ScheduleDetail.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ScheduleDetail = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    origin: \"\",\n    destination: \"\",\n    price: \"\",\n    departureDate: \"\",\n    departureTime: \"\",\n    arrivalTime: \"\",\n    desc: \"\",\n    totalSeats: \"\",\n    amenities: \"\",\n    stops: [],\n    seatNumbers: [],\n    photos: [] // Initialize photos array\n\n  });\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState(null);\n  const [newStop, setNewStop] = useState({\n    stopName: \"\",\n    arrivalTime: \"\"\n  });\n  useEffect(() => {\n    const fetchSchedule = async () => {\n      try {\n        const {\n          data\n        } = await getSchedule(id);\n        setFormData({ ...data,\n          departureDate: new Date(data.departureDate).toISOString().split('T')[0],\n          // Format for input\n          amenities: data.amenities.join(', '),\n          // Join array into string\n          photos: data.photos || [] // Ensure photos is an array\n\n        });\n      } catch (err) {\n        setError('Failed to load schedule details');\n      }\n    };\n\n    fetchSchedule();\n  }, [id]);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => {\n      if (name === \"totalSeats\") {\n        const seatCount = parseInt(value) || 0;\n        const seatNumbers = Array.from({\n          length: seatCount\n        }, (_, index) => ({\n          number: index + 1,\n          isBooked: false\n        }));\n        return { ...prev,\n          totalSeats: value,\n          seatNumbers\n        };\n      }\n\n      return { ...prev,\n        [name]: value\n      };\n    });\n  };\n\n  const handleStopChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewStop(prev => ({ ...prev,\n      [name]: value\n    }));\n  };\n\n  const addStop = () => {\n    if (newStop.stopName && newStop.arrivalTime) {\n      setFormData(prev => ({ ...prev,\n        stops: [...prev.stops, newStop]\n      }));\n      setNewStop({\n        stopName: \"\",\n        arrivalTime: \"\"\n      }); // Reset stop fields\n    }\n  };\n\n  const removeStop = index => {\n    setFormData(prev => ({ ...prev,\n      stops: prev.stops.filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    let imgUrl = formData.photos[0] || \"\";\n\n    if (file) {\n      const data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'upload');\n\n      try {\n        const uploadRes = await axios.post('https://api.cloudinary.com/v1_1/dhvb035xa/image/upload', data);\n        imgUrl = uploadRes.data.url;\n      } catch (err) {\n        setError('Failed to upload image');\n        return;\n      }\n    }\n\n    const updatedData = { ...formData,\n      price: parseFloat(formData.price),\n      totalSeats: parseInt(formData.totalSeats),\n      photos: imgUrl ? [imgUrl] : [],\n      amenities: formData.amenities.split(',').map(item => item.trim())\n    };\n\n    try {\n      await updateSchedule(id, updatedData);\n      alert('Schedule updated successfully');\n      navigate(-1); // Navigate back\n    } catch (err) {\n      var _err$response, _err$response$data;\n\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Something went wrong');\n    }\n  };\n\n  const handleBack = () => {\n    navigate(-1); // Navigate back\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"scheduleDetail\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Update Schedule\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"origin\",\n          children: \"Origin:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"origin\",\n          name: \"origin\",\n          value: formData.origin,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"destination\",\n          children: \"Destination:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"destination\",\n          name: \"destination\",\n          value: formData.destination,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          value: formData.price,\n          onChange: handleChange,\n          required: true,\n          min: \"0\",\n          step: \"0.01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"departureDate\",\n          children: \"Departure Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          id: \"departureDate\",\n          name: \"departureDate\",\n          value: formData.departureDate,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"departureTime\",\n          children: \"Departure Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          id: \"departureTime\",\n          name: \"departureTime\",\n          value: formData.departureTime,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"arrivalTime\",\n          children: \"Arrival Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          id: \"arrivalTime\",\n          name: \"arrivalTime\",\n          value: formData.arrivalTime,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"desc\",\n          children: \"Description:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"desc\",\n          name: \"desc\",\n          value: formData.desc,\n          onChange: handleChange,\n          required: true,\n          rows: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"totalSeats\",\n          children: \"Total Seats:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"totalSeats\",\n          name: \"totalSeats\",\n          value: formData.totalSeats,\n          onChange: handleChange,\n          required: true,\n          min: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Stops:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stopInputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"stopName\",\n            value: newStop.stopName,\n            onChange: handleStopChange,\n            placeholder: \"Stop Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            name: \"arrivalTime\",\n            value: newStop.arrivalTime,\n            onChange: handleStopChange,\n            placeholder: \"Arrival Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: addStop,\n            className: \"addStopButton\",\n            children: \"Add Stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), formData.stops.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"stopList\",\n          children: formData.stops.map((stop, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [stop.stopName, \" - \", stop.arrivalTime, /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => removeStop(index),\n              className: \"removeStopButton\",\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 37\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"amenities\",\n          children: \"Amenities (comma-separated):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"amenities\",\n          name: \"amenities\",\n          value: formData.amenities,\n          onChange: handleChange,\n          placeholder: \"e.g., WiFi, Snacks, Air Conditioning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Photos:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"imageUploadSection\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file\",\n            className: \"imageUploadLabel\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: file ? URL.createObjectURL(file) : formData.photos[0] || 'https://icons.veryicon.com/png/o/miscellaneous/common-fill-icon/gallery-33.png',\n              alt: \"Preview\",\n              className: \"imagePreview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DriveFolderUploadOutlinedIcon, {\n              className: \"uploadIcon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"file\",\n            onChange: e => setFile(e.target.files[0]),\n            style: {\n              display: 'none'\n            },\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errorMessage\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formGroup buttonsGroup\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submitButton\",\n          children: \"Update Schedule\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleBack,\n          className: \"cancelButton\",\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ScheduleDetail, \"0q8FYtBl0Hj/wpPtprgjzsRN0QI=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = ScheduleDetail;\nexport default ScheduleDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScheduleDetail\");","map":{"version":3,"sources":["C:/Users/user/OneDrive/Desktop/BusEase/admin/src/components/ScheduleDetail/ScheduleDetail.jsx"],"names":["React","useEffect","useState","axios","useParams","useNavigate","getSchedule","updateSchedule","DriveFolderUploadOutlinedIcon","ScheduleDetail","id","navigate","formData","setFormData","name","origin","destination","price","departureDate","departureTime","arrivalTime","desc","totalSeats","amenities","stops","seatNumbers","photos","file","setFile","error","setError","newStop","setNewStop","stopName","fetchSchedule","data","Date","toISOString","split","join","err","handleChange","e","value","target","prev","seatCount","parseInt","Array","from","length","_","index","number","isBooked","handleStopChange","addStop","removeStop","filter","i","handleSubmit","preventDefault","imgUrl","FormData","append","uploadRes","post","url","updatedData","parseFloat","map","item","trim","alert","response","message","handleBack","stop","URL","createObjectURL","files","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getSchedule, updateSchedule } from '../../api/scheduleApi';\r\nimport DriveFolderUploadOutlinedIcon from '@mui/icons-material/DriveFolderUploadOutlined';\r\nimport './ScheduleDetail.css';\r\n\r\nconst ScheduleDetail = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        origin: \"\",\r\n        destination: \"\",\r\n        price: \"\",\r\n        departureDate: \"\",\r\n        departureTime: \"\",\r\n        arrivalTime: \"\",\r\n        desc: \"\",\r\n        totalSeats: \"\",\r\n        amenities: \"\",\r\n        stops: [],\r\n        seatNumbers: [],\r\n        photos: [] // Initialize photos array\r\n    });\r\n    const [file, setFile] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [newStop, setNewStop] = useState({ stopName: \"\", arrivalTime: \"\" });\r\n\r\n    useEffect(() => {\r\n        const fetchSchedule = async () => {\r\n            try {\r\n                const { data } = await getSchedule(id);\r\n                setFormData({\r\n                    ...data,\r\n                    departureDate: new Date(data.departureDate).toISOString().split('T')[0], // Format for input\r\n                    amenities: data.amenities.join(', '), // Join array into string\r\n                    photos: data.photos || [] // Ensure photos is an array\r\n                });\r\n            } catch (err) {\r\n                setError('Failed to load schedule details');\r\n            }\r\n        };\r\n        fetchSchedule();\r\n    }, [id]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => {\r\n            if (name === \"totalSeats\") {\r\n                const seatCount = parseInt(value) || 0;\r\n                const seatNumbers = Array.from({ length: seatCount }, (_, index) => ({\r\n                    number: index + 1,\r\n                    isBooked: false\r\n                }));\r\n                return { ...prev, totalSeats: value, seatNumbers };\r\n            }\r\n            return { ...prev, [name]: value };\r\n        });\r\n    };\r\n\r\n    const handleStopChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setNewStop((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const addStop = () => {\r\n        if (newStop.stopName && newStop.arrivalTime) {\r\n            setFormData((prev) => ({\r\n                ...prev,\r\n                stops: [...prev.stops, newStop]\r\n            }));\r\n            setNewStop({ stopName: \"\", arrivalTime: \"\" }); // Reset stop fields\r\n        }\r\n    };\r\n\r\n    const removeStop = (index) => {\r\n        setFormData((prev) => ({\r\n            ...prev,\r\n            stops: prev.stops.filter((_, i) => i !== index)\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n\r\n        let imgUrl = formData.photos[0] || \"\";\r\n        if (file) {\r\n            const data = new FormData();\r\n            data.append('file', file);\r\n            data.append('upload_preset', 'upload');\r\n\r\n            try {\r\n                const uploadRes = await axios.post(\r\n                    'https://api.cloudinary.com/v1_1/dhvb035xa/image/upload',\r\n                    data\r\n                );\r\n                imgUrl = uploadRes.data.url;\r\n            } catch (err) {\r\n                setError('Failed to upload image');\r\n                return;\r\n            }\r\n        }\r\n\r\n        const updatedData = {\r\n            ...formData,\r\n            price: parseFloat(formData.price),\r\n            totalSeats: parseInt(formData.totalSeats),\r\n            photos: imgUrl ? [imgUrl] : [],\r\n            amenities: formData.amenities.split(',').map(item => item.trim())\r\n        };\r\n\r\n        try {\r\n            await updateSchedule(id, updatedData);\r\n            alert('Schedule updated successfully');\r\n            navigate(-1); // Navigate back\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'Something went wrong');\r\n        }\r\n    };\r\n\r\n    const handleBack = () => {\r\n        navigate(-1); // Navigate back\r\n    };\r\n\r\n    return (\r\n        <div className=\"scheduleDetail\">\r\n            <h2>Update Schedule</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"name\">Name:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        name=\"name\"\r\n                        value={formData.name}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"origin\">Origin:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"origin\"\r\n                        name=\"origin\"\r\n                        value={formData.origin}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"destination\">Destination:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"destination\"\r\n                        name=\"destination\"\r\n                        value={formData.destination}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"price\">Price:</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"price\"\r\n                        name=\"price\"\r\n                        value={formData.price}\r\n                        onChange={handleChange}\r\n                        required\r\n                        min=\"0\"\r\n                        step=\"0.01\"\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"departureDate\">Departure Date:</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        id=\"departureDate\"\r\n                        name=\"departureDate\"\r\n                        value={formData.departureDate}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"departureTime\">Departure Time:</label>\r\n                    <input\r\n                        type=\"time\"\r\n                        id=\"departureTime\"\r\n                        name=\"departureTime\"\r\n                        value={formData.departureTime}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"arrivalTime\">Arrival Time:</label>\r\n                    <input\r\n                        type=\"time\"\r\n                        id=\"arrivalTime\"\r\n                        name=\"arrivalTime\"\r\n                        value={formData.arrivalTime}\r\n                        onChange={handleChange}\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"desc\">Description:</label>\r\n                    <textarea\r\n                        id=\"desc\"\r\n                        name=\"desc\"\r\n                        value={formData.desc}\r\n                        onChange={handleChange}\r\n                        required\r\n                        rows=\"4\"\r\n                    ></textarea>\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"totalSeats\">Total Seats:</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"totalSeats\"\r\n                        name=\"totalSeats\"\r\n                        value={formData.totalSeats}\r\n                        onChange={handleChange}\r\n                        required\r\n                        min=\"0\"\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label>Stops:</label>\r\n                    <div className=\"stopInputs\">\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"stopName\"\r\n                            value={newStop.stopName}\r\n                            onChange={handleStopChange}\r\n                            placeholder=\"Stop Name\"\r\n                        />\r\n                        <input\r\n                            type=\"time\"\r\n                            name=\"arrivalTime\"\r\n                            value={newStop.arrivalTime}\r\n                            onChange={handleStopChange}\r\n                            placeholder=\"Arrival Time\"\r\n                        />\r\n                        <button type=\"button\" onClick={addStop} className=\"addStopButton\">Add Stop</button>\r\n                    </div>\r\n                    {formData.stops.length > 0 && (\r\n                        <ul className=\"stopList\">\r\n                            {formData.stops.map((stop, index) => (\r\n                                <li key={index}>\r\n                                    {stop.stopName} - {stop.arrivalTime}\r\n                                    <button type=\"button\" onClick={() => removeStop(index)} className=\"removeStopButton\">Remove</button>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label htmlFor=\"amenities\">Amenities (comma-separated):</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"amenities\"\r\n                        name=\"amenities\"\r\n                        value={formData.amenities}\r\n                        onChange={handleChange}\r\n                        placeholder=\"e.g., WiFi, Snacks, Air Conditioning\"\r\n                    />\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label>Photos:</label>\r\n                    <div className=\"imageUploadSection\">\r\n                        <label htmlFor=\"file\" className=\"imageUploadLabel\">\r\n                            <img\r\n                                src={\r\n                                    file\r\n                                        ? URL.createObjectURL(file)\r\n                                        : (formData.photos[0] || 'https://icons.veryicon.com/png/o/miscellaneous/common-fill-icon/gallery-33.png')\r\n                                }\r\n                                alt=\"Preview\"\r\n                                className=\"imagePreview\"\r\n                            />\r\n                            <DriveFolderUploadOutlinedIcon className=\"uploadIcon\" />\r\n                        </label>\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"file\"\r\n                            onChange={(e) => setFile(e.target.files[0])}\r\n                            style={{ display: 'none' }}\r\n                            accept=\"image/*\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {error && <div className=\"errorMessage\">{error}</div>}\r\n                <div className=\"formGroup buttonsGroup\">\r\n                    <button type=\"submit\" className=\"submitButton\">Update Schedule</button>\r\n                    <button type=\"button\" onClick={handleBack} className=\"cancelButton\">Back</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default ScheduleDetail;\r\n"]},"metadata":{},"sourceType":"module"}